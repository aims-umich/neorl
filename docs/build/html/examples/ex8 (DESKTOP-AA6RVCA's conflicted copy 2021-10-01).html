

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Example 8: Pressure Vessel Design with Demonstration of Categorical Parameter &mdash; NEORL 1.6 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example 9: Cantilever Stepped Beam" href="ex9.html" />
    <link rel="prev" title="Example 7: Pressure Vessel Design" href="ex7.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> NEORL
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                main (1.6 )
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">General Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guide/install.html">Quick Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/detinstall.html">Detailed Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/quickstart.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/rl.html">Reinforcement Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/evolu.html">Evolutionary Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/hyperparameter.html">Hyperparameter Tuning</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Algorithms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/a2c.html">Advantage Actor Critic (A2C)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/acer.html">Actor-Critic with Experience Replay (ACER)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/acktr.html">Actor Critic using Kronecker-Factored Trust Region (ACKTR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/dqn.html">Deep Q Learning (DQN)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ppo2.html">Proximal Policy Optimisation (PPO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/es.html">Evolution Strategies (<span class="math notranslate nohighlight">\(\mu,\lambda\)</span>) (ES)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/pso.html">Particle Swarm Optimisation (PSO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/de.html">Differential Evolution (DE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/xnes.html">Exponential Natural Evolution Strategies (XNES)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/gwo.html">Grey Wolf Optimizer (GWO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/pesa.html">Prioritized replay Evolutionary and Swarm Algorithm (PESA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/pesa2.html">Modern PESA (PESA2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/sa.html">Simulated Annealing (SA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ssa.html">Salp Swarm Algorithm (SSA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/woa.html">Whale Optimization Algorithm (WOA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/mfo.html">Moth-flame Optimization (MFO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/jaya.html">JAYA Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/bat.html">Bat Algorithm (BAT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/hho.html">Harris Hawks Optimization (HHO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/fneat.html">Feedforward Neuroevolution of Augmenting Topologies (FNEAT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/rneat.html">Recurrent Neuroevolution of Augmenting Topologies (RNEAT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ppoes.html">RL-informed Evolution Strategies (PPO-ES)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ackde.html">RL-informed Differential Evolution (ACKTR-DE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/aco.html">Ant Colony Optimization (ACO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/nga.html">Neural Genetic Algorithms (NGA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/nhho.html">Neural Harris Hawks Optimization (NHHO)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/cs.html">Cuckoo Search (CS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ts.html">Tabu Search (TS)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hyperparameter Tuning</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tune/grid.html">Grid Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tune/random.html">Random Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tune/bayes.html">Bayesian Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tune/evolu.html">Evolutionary Search</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ex1.html">Example 1: Traveling Salesman Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="ex2.html">Example 2: Ackley with EA</a></li>
<li class="toctree-l1"><a class="reference internal" href="ex3.html">Example 3: Welded-beam design</a></li>
<li class="toctree-l1"><a class="reference internal" href="ex4.html">Example 4: Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="ex5.html">Example 5: CEC’2017 Test Suite</a></li>
<li class="toctree-l1"><a class="reference internal" href="ex6.html">Example 6: Three-bar Truss Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="ex7.html">Example 7: Pressure Vessel Design</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Example 8: Pressure Vessel Design with Demonstration of Categorical Parameter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#neorl-script">NEORL script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#results">Results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ex9.html">Example 9: Cantilever Stepped Beam</a></li>
<li class="toctree-l1"><a class="reference internal" href="ex10.html">Example 10: Knapsack Problem</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/projects.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/contrib.html">Contributors</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NEORL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Example 8: Pressure Vessel Design with Demonstration of Categorical Parameter</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/examples/ex8.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="example-8-pressure-vessel-design-with-demonstration-of-categorical-parameter">
<span id="ex8"></span><h1>Example 8: Pressure Vessel Design with Demonstration of Categorical Parameter<a class="headerlink" href="#example-8-pressure-vessel-design-with-demonstration-of-categorical-parameter" title="Permalink to this headline">¶</a></h1>
<p>Example of solving the constrained engineering optimization problem “Pressure vessel design” using NEORL with HHO, ES, PESA, and BAT algorithms to demonstrate compatibility with mix of continuous, discrete, and categorical spaces.</p>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Algorithms: HHO, ES, PESA, BAT</p></li>
<li><p>Type: Mixed discrete-continuous-categorical, Single-objective, Constrained</p></li>
<li><p>Field: Mechanical Engineering</p></li>
</ul>
</div>
<div class="section" id="problem-description">
<h2>Problem Description<a class="headerlink" href="#problem-description" title="Permalink to this headline">¶</a></h2>
<p>The pressure vessel design is an engineering optimization problem with the objective to evaluate the optimal thickness of shell (<span class="math notranslate nohighlight">\(T_s\)</span>), thickness of head (<span class="math notranslate nohighlight">\(T_h\)</span>), inner radius (R), and length of shell (L) such that the total cost of material, forming, and welding is minimized accounting for 4 constraints. <span class="math notranslate nohighlight">\(T_s\)</span> and <span class="math notranslate nohighlight">\(T_h\)</span> are integer multiples of 0.0625 in., which are the available thicknesses of rolled steel plates, and R and L are continuous. Unlike <a class="reference internal" href="ex7.html#ex7"><span class="std std-ref">Example 7</span></a>, <span class="math notranslate nohighlight">\(T_h\)</span> will be modeled as a categorical parameter to demonstrate compatibility with a mix of continuous, discrete, and categorical parameters. The figure below shows the dimensions of the pressure vessel structure.</p>
<a class="reference internal image-reference" href="../_images/ex78_vessel_diagram.jpg"><img alt="alternate text" class="align-center" src="../_images/ex78_vessel_diagram.jpg" style="width: 466.0px; height: 250.5px;" /></a>
<p>The equation for the cost of the pressure vessel is</p>
<div class="math notranslate nohighlight">
\[\min_{\vec{x}} f (\vec{x}) = 0.6224x_1x_3x_4 + 1.7781x_2x_3^2 + 3.1661x_1^2x_4 + 19.84x_1^2x_3,\]</div>
<p>subject to 4 constraints</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}g_1 = -x_1 + 0.0193x_3 \leq 0,\\g_2 = -x_2 + 0.00954x_3 \leq 0,\\g_3 = -\pi x_3^2x_4 - \frac{4}{3} \pi x_3^3 + 1296000 \leq 0,\\g_4 = x_4 - 240 \leq 0,\end{aligned}\end{align} \]</div>
<p>where <span class="math notranslate nohighlight">\(0.0625 \leq x_1 \leq 6.1875\)</span> (with step of 0.0625), <span class="math notranslate nohighlight">\(x_2 \in \{0.0625, 0.125, 0.1875, 0.25, 0.3125, 0.375, 0.4375, 0.5, 0.5625, 0.625\}\)</span>, <span class="math notranslate nohighlight">\(10 \leq x_3 \leq 200\)</span>, and <span class="math notranslate nohighlight">\(10 \leq x_4 \leq 200\)</span>.</p>
</div>
<div class="section" id="neorl-script">
<h2>NEORL script<a class="headerlink" href="#neorl-script" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">########################</span>
<span class="c1"># Import Packages</span>
<span class="c1">########################</span>

<span class="kn">from</span> <span class="nn">neorl</span> <span class="kn">import</span> <span class="n">HHO</span><span class="p">,</span> <span class="n">ES</span><span class="p">,</span> <span class="n">PESA</span><span class="p">,</span> <span class="n">BAT</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1">#################################</span>
<span class="c1"># Define Vessel Function </span>
<span class="c1">#Mixed discrete/continuous/grid</span>
<span class="c1">#################################</span>
<span class="k">def</span> <span class="nf">Vessel</span><span class="p">(</span><span class="n">individual</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pressure vesssel design</span>
<span class="sd">    x1: thickness (d1)  --&gt; discrete value multiple of 0.0625 in </span>
<span class="sd">    x2: thickness of the heads (d2) ---&gt; categorical value from a pre-defined grid</span>
<span class="sd">    x3: inner radius (r)  ---&gt; cont. value between [10, 200]</span>
<span class="sd">    x4: length (L)  ---&gt; cont. value between [10, 200]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">x</span><span class="o">=</span><span class="n">individual</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="mf">0.0625</span>   <span class="c1">#convert d1 to &quot;in&quot; </span>

    <span class="n">y</span> <span class="o">=</span> <span class="mf">0.6224</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">+</span><span class="mf">1.7781</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mf">3.1661</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">+</span><span class="mf">19.84</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

    <span class="n">g1</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mf">0.0193</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="n">g2</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mf">0.00954</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="n">g3</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">**</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">1296000</span><span class="p">;</span>
    <span class="n">g4</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">-</span><span class="mi">240</span><span class="p">;</span>
    <span class="n">g</span><span class="o">=</span><span class="p">[</span><span class="n">g1</span><span class="p">,</span><span class="n">g2</span><span class="p">,</span><span class="n">g3</span><span class="p">,</span><span class="n">g4</span><span class="p">]</span>
    
    <span class="n">phi</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">g</span><span class="p">)</span>
    <span class="n">eps</span><span class="o">=</span><span class="mf">1e-5</span> <span class="c1">#tolerance to escape the constraint region</span>
    <span class="n">penality</span><span class="o">=</span><span class="mf">1e7</span> <span class="c1">#large penality to add if constraints are violated</span>
    
    <span class="k">if</span> <span class="n">phi</span> <span class="o">&gt;</span> <span class="n">eps</span><span class="p">:</span>  
        <span class="n">fitness</span><span class="o">=</span><span class="n">phi</span><span class="o">+</span><span class="n">penality</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fitness</span><span class="o">=</span><span class="n">y</span>
    <span class="k">return</span> <span class="n">fitness</span>


<span class="n">bounds</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">bounds</span><span class="p">[</span><span class="s1">&#39;x1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">99</span><span class="p">]</span>
<span class="n">bounds</span><span class="p">[</span><span class="s1">&#39;x2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;grid&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.0625</span><span class="p">,</span> <span class="mf">0.125</span><span class="p">,</span> <span class="mf">0.1875</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.3125</span><span class="p">,</span> <span class="mf">0.375</span><span class="p">,</span> <span class="mf">0.4375</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5625</span><span class="p">,</span> <span class="mf">0.625</span><span class="p">)]</span>
<span class="n">bounds</span><span class="p">[</span><span class="s1">&#39;x3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;float&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">]</span>
<span class="n">bounds</span><span class="p">[</span><span class="s1">&#39;x4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;float&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">200</span><span class="p">]</span>

<span class="c1">########################</span>
<span class="c1"># Setup and evolute HHO</span>
<span class="c1">########################</span>
<span class="n">hho</span> <span class="o">=</span> <span class="n">HHO</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="n">Vessel</span><span class="p">,</span> <span class="n">nhawks</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> 
                  <span class="n">int_transform</span><span class="o">=</span><span class="s1">&#39;minmax&#39;</span><span class="p">,</span> <span class="n">ncores</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">x_hho</span><span class="p">,</span> <span class="n">y_hho</span><span class="p">,</span> <span class="n">hho_hist</span><span class="o">=</span><span class="n">hho</span><span class="o">.</span><span class="n">evolute</span><span class="p">(</span><span class="n">ngen</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">Vessel</span><span class="p">(</span><span class="n">x_hho</span><span class="p">)</span> <span class="o">==</span> <span class="n">y_hho</span>

<span class="c1">########################</span>
<span class="c1"># Setup and evolute ES </span>
<span class="c1">########################</span>
<span class="n">es</span> <span class="o">=</span> <span class="n">ES</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="n">Vessel</span><span class="p">,</span> <span class="n">cxmode</span><span class="o">=</span><span class="s1">&#39;cx2point&#39;</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> 
                 <span class="n">lambda_</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">cxpb</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">mutpb</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">x_es</span><span class="p">,</span> <span class="n">y_es</span><span class="p">,</span> <span class="n">es_hist</span><span class="o">=</span><span class="n">es</span><span class="o">.</span><span class="n">evolute</span><span class="p">(</span><span class="n">ngen</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">Vessel</span><span class="p">(</span><span class="n">x_es</span><span class="p">)</span> <span class="o">==</span> <span class="n">y_es</span>

<span class="c1">########################</span>
<span class="c1"># Setup and evolute PESA</span>
<span class="c1">########################</span>
<span class="n">pesa</span><span class="o">=</span><span class="n">PESA</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="n">Vessel</span><span class="p">,</span> <span class="n">npop</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">alpha_init</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
          <span class="n">alpha_end</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">cxpb</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">mutpb</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">alpha_backdoor</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">x_pesa</span><span class="p">,</span> <span class="n">y_pesa</span><span class="p">,</span> <span class="n">pesa_hist</span><span class="o">=</span><span class="n">pesa</span><span class="o">.</span><span class="n">evolute</span><span class="p">(</span><span class="n">ngen</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">Vessel</span><span class="p">(</span><span class="n">x_pesa</span><span class="p">)</span> <span class="o">==</span> <span class="n">y_pesa</span>

<span class="c1">########################</span>
<span class="c1"># Setup and evolute BAT</span>
<span class="c1">########################</span>
<span class="n">bat</span><span class="o">=</span><span class="n">BAT</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="n">Vessel</span><span class="p">,</span> <span class="n">nbats</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">fmin</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">,</span> <span class="n">fmax</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> 
        <span class="n">A</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">r0</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">levy</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">seed</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ncores</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">x_bat</span><span class="p">,</span> <span class="n">y_bat</span><span class="p">,</span> <span class="n">bat_hist</span><span class="o">=</span><span class="n">bat</span><span class="o">.</span><span class="n">evolute</span><span class="p">(</span><span class="n">ngen</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">Vessel</span><span class="p">(</span><span class="n">x_bat</span><span class="p">)</span> <span class="o">==</span> <span class="n">y_bat</span>

<span class="c1">########################</span>
<span class="c1"># Plotting</span>
<span class="c1">########################</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hho_hist</span><span class="p">[</span><span class="s1">&#39;global_fitness&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;HHO&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">es_hist</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;ES&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">pesa_hist</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;PESA&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bat_hist</span><span class="p">[</span><span class="s1">&#39;global_fitness&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;BAT&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Generation&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Fitness&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">10000</span><span class="p">])</span> <span class="c1">#zoom in</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;ex8_pv_fitness.png&#39;</span><span class="p">,</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;png&#39;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s2">&quot;tight&quot;</span><span class="p">)</span>

<span class="c1">########################</span>
<span class="c1"># Comparison</span>
<span class="c1">########################</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---Best HHO Results---&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x_hho</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_hho</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---Best ES Results---&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x_es</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_es</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---Best PESA Results---&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x_pesa</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_pesa</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---Best BAT Results---&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x_bat</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_bat</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="results">
<h2>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<p>A summary of the results is shown below with the best <span class="math notranslate nohighlight">\((x_1, x_2, x_3, x_4)\)</span> and <span class="math notranslate nohighlight">\(y=f(x)\)</span> (minimum vessel cost). The figure is zoomed to a relevant y-scale that shows all methods clearly. HHO is best algorithm for this case.</p>
<a class="reference internal image-reference" href="../_images/ex8_pv_fitness.png"><img alt="alternate text" class="align-center" src="../_images/ex8_pv_fitness.png" style="width: 502.79999999999995px; height: 332.09999999999997px;" /></a>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">------------------------</span> <span class="n">HHO</span> <span class="n">Summary</span> <span class="o">--------------------------</span>
<span class="n">Function</span><span class="p">:</span> <span class="n">Vessel</span>
<span class="n">Best</span> <span class="n">fitness</span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">found</span><span class="p">:</span> <span class="mf">6076.871989481831</span>
<span class="n">Best</span> <span class="n">individual</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">found</span><span class="p">:</span> <span class="p">[</span><span class="mf">13.0</span><span class="p">,</span> <span class="mf">0.4375</span><span class="p">,</span> <span class="mf">41.958165787313035</span><span class="p">,</span> <span class="mf">178.38267571773872</span><span class="p">]</span>
<span class="o">--------------------------------------------------------------</span>
<span class="o">------------------------</span> <span class="n">ES</span> <span class="n">Summary</span> <span class="o">--------------------------</span>
<span class="n">Best</span> <span class="n">fitness</span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">found</span><span class="p">:</span> <span class="mf">6689.115350860009</span>
<span class="n">Best</span> <span class="n">individual</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">found</span><span class="p">:</span> <span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">52.39036909796362</span><span class="p">,</span> <span class="mf">80.46789374601103</span><span class="p">]</span>
<span class="o">--------------------------------------------------------------</span>
<span class="o">------------------------</span> <span class="n">PESA</span> <span class="n">Summary</span> <span class="o">--------------------------</span>
<span class="n">Best</span> <span class="n">fitness</span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">found</span><span class="p">:</span> <span class="mf">6420.244320020875</span>
<span class="n">Best</span> <span class="n">individual</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">found</span><span class="p">:</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">48.11672433151982</span><span class="p">,</span> <span class="mf">114.1606860286298</span><span class="p">]</span>
<span class="o">--------------------------------------------------------------</span>
<span class="o">------------------------</span> <span class="n">BAT</span> <span class="n">Summary</span> <span class="o">--------------------------</span>
<span class="n">Best</span> <span class="n">fitness</span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">found</span><span class="p">:</span> <span class="mf">6194.304291280144</span>
<span class="n">Best</span> <span class="n">individual</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">found</span><span class="p">:</span> <span class="p">[</span><span class="mf">13.0</span><span class="p">,</span> <span class="mf">0.4375</span><span class="p">,</span> <span class="mf">41.040436491185176</span><span class="p">,</span> <span class="mf">190.26719495938994</span><span class="p">]</span>
<span class="o">--------------------------------------------------------------</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="ex9.html" class="btn btn-neutral float-right" title="Example 9: Cantilever Stepped Beam" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="ex7.html" class="btn btn-neutral float-left" title="Example 7: Pressure Vessel Design" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Exelon Corp. &amp; MIT.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>